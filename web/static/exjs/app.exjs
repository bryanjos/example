defmodule App do
  import JS.Todo
  require JQuery

  @ul JQuery.("#todo-list")
  @elem JQuery.("#new-todo")

  defp process_event(%{which: 13}) do
    Todo.add(@ul, elem.val)
    elem.val("")       
  end

  defp process_event(event) do
    Logger.debug(event)      
  end

  defp main() do
    Todo.bind_events(@ul)
    Todo.list(@ul)

    elem.keypress(fn(event) -> process_event(event) end)
  end

  main()
end